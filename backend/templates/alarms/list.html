<div id="alarm-container">
    <div id="alarm-list">
        <div class="overflow-x-auto">
            <table class="table-auto w-full border overflow-x-auto">
                <thead>
                    <tr>
                        <th class="px-2 py-1 border">{{ "Nr" | t }}</th>
                        <th class="px-2 py-1 border">{{ "Date" | t }}</th>
                        <th class="px-2 py-1 border">{{ "Customer" | t }}</th>
                        <th class="px-2 py-1 border">{{ "Event" | t }}</th>
                        <th class="px-2 py-1 border">{{ "Note" | t }}</th>
                        <th class="px-2 py-1 border">{{ "Command" | t }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for alarm in alarms %}
                    <tr hx-get="{{ url_for('alarm_detail', alarm_id=alarm.id) }}?list=short" hx-target="#alarm-info"
                        hx-trigger="click" class="cursor-pointer hover:bg-gray-100">
                        <td class="px-2 py-1 border">{{ loop.index }}</td>
                        <td class="px-2 py-1 border">{{ alarm.date }}</td>
                        <td class="px-2 py-1 border">{{ alarm.customer.first_name }} {{ alarm.customer.last_name }}</td>
                        <td class="px-2 py-1 border">{{ alarm.event.name }}</td>
                        <td class="px-2 py-1 border">{{ alarm.note }}</td>
                        <td class="px-2 py-1 border text-center" @click.stop>

                            <!--
                            <button hx-get="{{ url_for('alarm_detail', alarm_id=alarm.id) }}"
                                hx-target="#modal-container" hx-swap="innerHTML" @click="$store.modal.open = true">
                                {{ "Edit" | t }}
                            </button>
-->
                            <button hx-post="{{ url_for('delete_alarm', alarm_id=alarm.id) }}"
                                hx-on="htmx:afterRequest: showPopup(event); reloadAlarms();"
                                hx-trigger="confirmed"
                                x-confirm="{{'Are you sure you want to delete this record?' | t }}">
                                {{ "Delete" | t }}
                            </button>
                        </td>

                    </tr>
                    {% endfor %}
                </tbody>
            </table>

                    <div class="mt-2 flex gap-2">
<!--
            <button hx-get="/alarms/alarm/0" hx-target="#modal-container" @click="$store.modal.open = true"
                class="px-3 py-1 border rounded bg-gray-100 hover:bg-gray-200">
                {{ "New Alarm" | t }}
            </button>
            </div>
-->
        </div>
        <div class="mt-2 flex gap-2">

            <form hx-post="/alarms/set_filter" hx-target="#alarm-container" hx-swap="innerHTML" hx-ext="json-enc"
                class="space-y-4">

                <!-- Alarm date range -->
                <div class="mb-2">
                    <div class="flex gap-2 items-center">
                        <input type="date" name="alarm_date_filter-start" value="" class="border p-1">
                        <span>to</span>
                        <input type="date" name="alarm_date_filter-end" value="" class="border p-1">
                        <button type="submit" class="px-3 py-1 border rounded bg-gray-100 hover:bg-gray-200">
                            Apply filters
                        </button>
                    </div>
                </div>
            </form>

        </div>
    </div>
    <div class="mt-4" id="alarm-info">
    </div>
</div>